# Guía de Pruebas Finales

**Proyecto:** QuickStay - Plataforma de Alquiler Express
**Módulo:** Administración de Sistemas Informáticos en Red (ASIR)
**Autor:** Antonio López Montes
**Fecha:** 8 de Enero de 2026

---

## 1. Pruebas Funcionales Completas

Las pruebas funcionales exhaustivas validarán que todas las características y funcionalidades de la plataforma QuickStay operan según lo esperado, cubriendo los flujos de usuario, la administración del sistema y la interacción con los dispositivos IoT.

### 1.1. Flujo Completo de Reserva de Propiedad (Usuario → Web → App → BD)

| Escenario de Prueba | Pasos | Criterio de Éxito |
| :--- | :--- | :--- |
| **Registro de Usuario** | 1. Acceder a la web. 2. Registrar un nuevo usuario. 3. Verificar confirmación por email (simulado). 4. Iniciar sesión. | El usuario debe poder registrarse, iniciar sesión y acceder a su panel de control. |
| **Búsqueda y Reserva** | 1. Iniciar sesión. 2. Buscar propiedades disponibles. 3. Seleccionar una propiedad y rango horario. 4. Realizar la reserva y pago (simulado). | La reserva debe ser confirmada, el estado de la propiedad actualizado y los datos registrados correctamente en la BD. |
| **Cancelación de Reserva** | 1. Iniciar sesión. 2. Acceder a reservas activas. 3. Cancelar una reserva. | La reserva debe ser cancelada, el estado de la propiedad actualizado y los datos reflejados en la BD. |

### 1.2. Administración del Sistema (AD, Monitoreo, Backup)

| Escenario de Prueba | Pasos | Criterio de Éxito |
| :--- | :--- | :--- |
| **Gestión de Usuarios AD** | 1. Crear un nuevo usuario en AD. 2. Verificar que el usuario puede acceder a recursos internos (ej. compartir archivos). | El usuario debe ser creado en AD y tener los permisos correctos. |
| **Alertas de Monitoreo** | 1. Simular un evento (ej. detener un servicio). 2. Verificar que Zabbix detecta el evento y envía una alerta. | La alerta debe ser generada y recibida por el canal configurado (ej. email). |
| **Verificación de Backup** | 1. Verificar el estado de los jobs de backup en el servidor Veeam (simulado). 2. Realizar una restauración de un archivo pequeño. | Los jobs de backup deben completarse con éxito y la restauración debe ser exitosa. |

### 1.3. IoT: Simulación de Sensores de Temperatura/Luces

| Escenario de Prueba | Pasos | Criterio de Éxito |
| :--- | :--- | :--- |
| **Lectura de Sensores** | 1. Simular un dispositivo IoT enviando datos de temperatura/luz a Mosquitto. 2. Verificar que la aplicación o el dashboard de monitoreo recibe y muestra los datos. | Los datos del sensor deben ser recibidos y procesados correctamente por la plataforma. |
| **Control de Dispositivos** | 1. Desde la aplicación, enviar un comando para encender/apagar una luz (simulado). 2. Verificar que el dispositivo IoT (simulado) recibe el comando y cambia de estado. | El comando debe ser enviado a través de MQTT y el dispositivo debe responder adecuadamente. |

### 1.4. Reportes y Dashboards

| Escenario de Prueba | Pasos | Criterio de Éxito |
| :--- | :--- | :--- |
| **Generación de Reportes** | 1. Acceder a la sección de reportes de la aplicación. 2. Generar un reporte de reservas por mes. | El reporte debe ser generado correctamente con datos precisos. |
| **Visualización de Dashboards** | 1. Acceder al dashboard de Zabbix/Wazuh. 2. Verificar que los gráficos y métricas se actualizan en tiempo real. | El dashboard debe mostrar información actualizada y relevante del estado de la infraestructura. |

---

## 2. Pruebas de Seguridad

Las pruebas de seguridad se enfocarán en identificar vulnerabilidades y asegurar que la infraestructura de QuickStay cumple con los estándares de seguridad definidos, utilizando herramientas y metodologías comunes en ciberseguridad.

### 2.1. Scanning de Puertos (Nmap Simulado)

| Herramienta | Objetivo | Metodología | Criterio de Éxito |
| :--- | :--- | :--- | :--- |
| **Nmap** | Identificar puertos abiertos y servicios expuestos en todos los servidores. | Ejecutar `nmap -sV -p- <IP_SERVIDOR>` desde una red externa (simulada) y desde la red interna. | Solo los puertos y servicios esperados deben estar abiertos y accesibles. |

### 2.2. Verificación de Compliance Básico

| Estándar | Objetivo | Metodología | Criterio de Éxito |
| :--- | :--- | :--- | :--- |
| **CIS Benchmarks** | Verificar la configuración de seguridad de los sistemas operativos y servicios. | Revisar la configuración de los servidores Linux y Windows (AD-DC) contra los *benchmarks* de CIS. | Los servidores deben cumplir con los requisitos mínimos de seguridad del *benchmark* aplicable. |
| **RGPD** | Asegurar la protección de datos personales. | Revisar las políticas de privacidad, gestión de datos y logs de acceso a datos sensibles. | La plataforma debe cumplir con los principios básicos del RGPD. |

### 2.3. Análisis de Logs de Seguridad

| Herramienta | Objetivo | Metodología | Criterio de Éxito |
| :--- | :--- | :--- | :--- |
| **Wazuh** | Detectar eventos de seguridad, intentos de intrusión y actividad sospechosa. | Revisar los dashboards y alertas de Wazuh, simular ataques básicos (ej. intentos de login fallidos). | Wazuh debe detectar y alertar sobre los eventos de seguridad simulados. |
| **Suricata** | Detectar tráfico de red malicioso. | Monitorizar los logs de Suricata en el Servidor de Seguridad. | Suricata debe registrar y alertar sobre patrones de tráfico sospechosos. |

### 2.4. Pruebas de Acceso No Autorizado

| Escenario de Prueba | Pasos | Criterio de Éxito |
| :--- | :--- | :--- |
| **Acceso a Recursos Restringidos** | 1. Intentar acceder a un recurso de la VLAN de Servicios desde la DMZ. 2. Intentar acceder a un recurso de la VLAN de Gestión desde la VLAN de Servicios. | El acceso debe ser denegado por las reglas del firewall (iptables/ACLs). |
| **Inyección SQL (Simulada)** | 1. Intentar inyectar código SQL malicioso en formularios de la aplicación web. | La aplicación debe ser resistente a ataques de inyección SQL y no revelar información sensible. |

---

## 3. Pruebas de Recuperación ante Desastres

Las pruebas de recuperación ante desastres (DR) validarán la capacidad de QuickStay para recuperarse de eventos catastróficos, asegurando que los RTO (Recovery Time Objective) y RPO (Recovery Point Objective) definidos se cumplen.

### 3.1. Escenario: Caída de VLAN Completa

| Escenario | Objetivo | Metodología | Criterio de Éxito |
| :--- | :--- | :--- | :--- |
| **Fallo de VLAN de Servicios** | Recuperar los servicios de aplicación y base de datos. | Simular la desconexión de la VLAN de Servicios. Activar el plan de DR para levantar los servicios en una ubicación alternativa (simulada) o restaurar desde backups. | Los servicios críticos deben estar operativos dentro del RTO (4h) y con una pérdida de datos mínima (RPO 1h). |

### 3.2. Escenario: Corrupción de Base de Datos

| Escenario | Objetivo | Metodología | Criterio de Éxito |
| :--- | :--- | :--- | :--- |
| **Corrupción de MySQL Master** | Restaurar la base de datos a un punto anterior a la corrupción. | Simular la corrupción de la base de datos en `db1`. Ejecutar el proceso de restauración desde el último backup válido. | La base de datos debe ser restaurada a un estado consistente, cumpliendo con el RPO (1h). |

### 3.3. Escenario: Ransomware Simulado

| Escenario | Objetivo | Metodología | Criterio de Éxito |
| :--- | :--- | :--- | :--- |
| **Infección por Ransomware** | Recuperar los servidores afectados y los datos. | Simular una infección por *ransomware* en un servidor (ej. `webserver1`). Ejecutar el proceso de recuperación (restauración de VM o *bare-metal recovery*). | El servidor debe ser recuperado a un estado limpio y funcional, con los datos restaurados. |

### 3.4. Tiempos de Recuperación Medidos

Se registrarán los tiempos reales de recuperación para cada escenario de DR para asegurar que se cumplen los RTO y RPO definidos.

| Escenario de DR | RTO Objetivo | RPO Objetivo | RTO Medido | RPO Medido |
| :--- | :--- | :--- | :--- | :--- |
| **Caída de VLAN** | `4 horas` | `1 hora` | `[Tiempo Real]` | `[Tiempo Real]` |
| **Corrupción de BD** | `4 horas` | `1 hora` | `[Tiempo Real]` | `[Tiempo Real]` |
| **Ransomware** | `4 horas` | `1 hora` | `[Tiempo Real]` | `[Tiempo Real]` |
